#!/usr/bin/env fish

if test (uname) != "Linux"
    echo "You need to run this script on Linux"
    exit -1
end

# Checks if the user is root
if test (id -u) -ne 0
    echo "Must be root to run"
    exit -1
end

# Removes mirrorlist.pacnew if it exists
rm -fv /etc/pacman.d/mirrorlist.pacnew

# Gets a list of mirrors sorted by rate using n threads
reflector -p https -c US --verbose --threads (nproc) --sort rate --save /etc/pacman.d/mirrorlist

